<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>ç­è¡¨ç®¡ç† - ä»¤å’Œåšå¤šç®¡ç†ç³»çµ±</title>
        <link href="css/styles.css" rel="stylesheet" />
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    </head>
    <body class="sb-nav-fixed">
         <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
            <!-- Navbar Brand-->
            <a class="navbar-brand ps-3" href="index.html">ä»¤å’Œåšå¤šç®¡ç†ç³»çµ±</a>
            <!-- Sidebar Toggle-->
            <button class="btn btn-link btn-sm order-1 order-lg-0 me-4 me-lg-0" id="sidebarToggle" href="#!"><i class="fas fa-bars"></i></button>
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ms-auto me-0 me-md-3 my-2 my-md-0">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search for..." aria-describedby="btnNavbarSearch" />
                    <button class="btn btn-primary" id="btnNavbarSearch" type="button"><i class="fas fa-search"></i></button>
                </div>
            </form>
            <!-- Navbar-->
            <ul class="navbar-nav ms-auto ms-md-0 me-3 me-lg-4">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#!">Settings</a></li>
                        <li><a class="dropdown-item" href="#!">Activity Log</a></li>
                        <li><hr class="dropdown-divider" /></li>
                        <li><a class="dropdown-item" href="#!">Logout</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">Core</div>
                            <a class="nav-link" href="index.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                Dashboard
                            </a>
                            <div class="sb-sidenav-menu-heading">Pages</div>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseLayouts" aria-expanded="false" aria-controls="collapseLayouts">
                                <div class="sb-nav-link-icon"><i class="fas fa-columns"></i></div>
                                äººäº‹ç®¡ç†
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="collapseLayouts" aria-labelledby="headingOne" data-bs-parent="#sidenavAccordion">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" href="layout-static.html">å“¡å·¥è³‡æ–™è¡¨</a>
                                    <a class="nav-link" href="layout-sidenav-light.html">ç­è¡¨ç®¡ç†</a>
                                    <a class="nav-link" href="index%20copy%202.html">å‡åˆ¥ç®¡ç†</a>
                                    <a class="nav-link" href="layout-sidenav-light.html">æ‰“å¡ç´€éŒ„</a>
                                    <a class="nav-link" href="layout-sidenav-light.html">è–ªè³‡ç´€éŒ„è¡¨</a>
                                </nav>
                            </div>
                            <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseOperation" aria-expanded="false" aria-controls="collapseOperation">
    <div class="sb-nav-link-icon"><i class="fas fa-chart-line"></i></div>
    ç‡Ÿé‹ç®¡ç†
    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
</a>
<div class="collapse" id="collapseOperation" aria-labelledby="headingOperation" data-bs-parent="#sidenavAccordion">
    <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionOperation">
        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#operationCollapseInventory" aria-expanded="false" aria-controls="operationCollapseInventory">
            åº«å­˜ç®¡ç†
            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
        </a>
        <div class="collapse" id="operationCollapseInventory" aria-labelledby="headingInventory" data-bs-parent="#sidenavAccordionOperation">
            <nav class="sb-sidenav-menu-nested nav">
                <a class="nav-link" href="55.html">åº«å­˜æŸ¥è©¢</a>
                <a class="nav-link" href="55%20copy.html">åº«å­˜èª¿æ•´</a>
            </nav>
        </div>
        <a class="nav-link" href="index%20copy.html">
            <div class="sb-nav-link-icon"><i class="fas fa-calendar-alt"></i></div>
            è«‹å‡ç”³è«‹
        </a>
        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#operationCollapseReport" aria-expanded="false" aria-controls="operationCollapseReport">
            å ±è¡¨
            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
        </a>
        <div class="collapse" id="operationCollapseReport" aria-labelledby="headingReport" data-bs-parent="#sidenavAccordionOperation">
            <nav class="sb-sidenav-menu-nested nav">
                <a class="nav-link" href="daily%20report%20.html">æ—¥å ±è¡¨</a>
                <a class="nav-link" href="salary-report.html">è–ªè³‡å ±è¡¨</a>
                <a class="nav-link" href="schedule-report.html">ç­è¡¨å ±è¡¨</a>
            </nav>
        </div>
    </nav>
</div>

    <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#collapseWebsite" aria-expanded="false" aria-controls="collapseWebsite">
    <div class="sb-nav-link-icon"><i class="fas fa-cogs"></i></div>
    ç¶²ç«™ç®¡ç†
    <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
</a>
<div class="collapse" id="collapseWebsite" aria-labelledby="headingWebsite" data-bs-parent="#sidenavAccordion">
    <nav class="sb-sidenav-menu-nested nav accordion" id="sidenavAccordionWebsite">
        <a class="nav-link" href="layout-static.html">å®˜ç¶²è³‡æ–™ä¿®æ”¹</a>
        </a>
        <a class="nav-link collapsed" href="#" data-bs-toggle="collapse" data-bs-target="#websiteCollapseMember" aria-expanded="false" aria-controls="websiteCollapseMember">
            æœƒå“¡ç®¡ç†
            <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
        </a>
        <div class="collapse" id="websiteCollapseMember" aria-labelledby="headingMember" data-bs-parent="#sidenavAccordionWebsite">
            <nav class="sb-sidenav-menu-nested nav">
                <a class="nav-link" href="member-list.html">æœƒå“¡æ¸…å–®</a>
                <a class="nav-link" href="member-detail.html">è©³ç´°è³‡æ–™é </a>
                <a class="nav-link" href="point-manage.html">é»æ•¸ç®¡ç†</a>
            </nav>
        </div>
    </nav>
</div>
                            <div class="sb-sidenav-menu-heading">Addons</div>
                            <a class="nav-link" href="charts.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-chart-area"></i></div>
                                Charts
                            </a>
                            <a class="nav-link" href="tables.html">
                                <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                                Tables
                            </a>
                        </div>
                        
                    </div>
                    
                    <div class="sb-sidenav-footer">
                        <div class="small">Logged in as:</div>
                        Start Bootstrap
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">ç­è¡¨ç®¡ç†</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                            <li class="breadcrumb-item active">ç­è¡¨ç®¡ç†</li>
                        </ol>                     
                    </div>
                </main>
                
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<!-- âœ… ç½®ä¸­å€å¡Šé–‹å§‹ -->
<div class="container">

    <!-- ğŸ” æŸ¥è©¢æ—¥æœŸ -->
    <div class="d-flex justify-content-start align-items-center gap-2 mb-4">
        <select id="yearSelect" class="form-select" style="width: 100px;"></select>
        <select id="monthSelect" class="form-select" style="width: 100px;"></select>
        <select id="daySelect" class="form-select" style="width: 100px;"></select>
        <button class="btn btn-primary" onclick="loadSchedule()">æŸ¥è©¢</button>
    </div>

    <!-- ğŸ“… æœ¬é€±ç­è¡¨ -->
    <h5>æœ¬é€±ç­è¡¨</h5>
    <table class="table table-bordered text-center align-middle">
        <thead class="table-primary" id="weekHeader">
  <!-- è‡ªå‹•ç”¢ç”Ÿ -->
</thead>
        <tbody id="currentScheduleTable">
            <!-- é€™è£¡æœƒè¼‰å…¥è³‡æ–™ -->
        </tbody>
    </table>

    <!-- âœï¸ ç·¨è¼¯ç­è¡¨ï¼Œå¡ç‰‡åŒ…èµ·ä¾† -->
    <div class="card mt-5">
        <div class="card-body">
             <h4 class="mb-3">âœï¸ ç·¨è¼¯ç­è¡¨</h4>
    <table class="table table-bordered" id="scheduleTable">
        <thead class="table-light">
            <tr>
                <th>å§“å</th>
                <th>æ™‚æ®µ</th>
                <!-- æ—¥æœŸæ¬„ä½è‡ªå‹•æ’å…¥ -->
            </tr>
        </thead>
        <tbody id="scheduleBody">
            <!-- è‡ªå‹•æ’å…¥æ’ç­åˆ— -->
        </tbody>
    </table>

    <button class="btn btn-primary ms-2" onclick="saveSchedule()">å„²å­˜ç­è¡¨</button>
    <button class="btn btn-primary ms-2" onclick="editSchedule()">ç·¨è¼¯ç­è¡¨</button>
<!-- âœ… ç½®ä¸­å€å¡ŠçµæŸ -->

<!-- ğŸ› ï¸ Javascript -->

    <script>
        // âœ… ç­åˆ¥é¸å–®
        const shifts = ["", "1000-1400", "1200-1600", "1400-1800", "1600-2200", "1700-2200", "1800-2200"];

        // âœ… æ¨¡æ“¬å¾Œç«¯è¼‰å…¥çš„å“¡å·¥åå–®
        const employees = ["éŸ¶éœ", "æ‰¿è«º", "éº—éœ", "ä½©å‡", "å®œä¼¶", "å­£å«»", "æ²›ç‘œ"];

        // âœ… è‡ªå‹•ç”¢å‡ºæ˜ŸæœŸä¸€ ~ æ—¥çš„æ—¥æœŸï¼ˆå«æœˆæ—¥èˆ‡æ˜ŸæœŸï¼‰
        function getThisWeekDates() {
            const today = new Date();
            const day = today.getDay(); // æ˜ŸæœŸå¹¾ï¼ˆ0=æ—¥ï¼‰
            const monday = new Date(today);
            monday.setDate(today.getDate() - (day === 0 ? 6 : day - 1)); // æ‰¾åˆ°æœ¬é€±ä¸€

            const dates = [];
            const weekdays = ["ä¸€", "äºŒ", "ä¸‰", "å››", "äº”", "å…­", "æ—¥"];

            for (let i = 0; i < 7; i++) {
                const d = new Date(monday);
                d.setDate(monday.getDate() + i);
                const label = `${d.getMonth() + 1}/${d.getDate()}<br>æ˜ŸæœŸ${weekdays[i]}`;
                dates.push(label);
            }

            return dates;
        }

        // âœ… æ’å…¥è¡¨é ­çš„æ—¥æœŸæ¬„ä½
        function renderTableHeader() {
            const dates = getThisWeekDates();
            const headerRow = document.querySelector("#scheduleTable thead tr");
            dates.forEach(dateStr => {
                const th = document.createElement("th");
                th.innerHTML = dateStr;
                headerRow.appendChild(th);
            });
        }

        // âœ… å»ºç«‹è¡¨æ ¼å…§å®¹ï¼ˆæ¯ä½å“¡å·¥å…©è¡Œï¼šä¸­åˆèˆ‡æ™šä¸Šï¼‰
        function renderScheduleRows() {
            const tbody = document.getElementById("scheduleBody");
            employees.forEach(name => {
                ["ä¸­åˆ", "æ™šä¸Š"].forEach(period => {
                    const tr = document.createElement("tr");

                    // åªåœ¨ä¸­åˆæ¬„ä½åŠ ä¸Šåå­—ï¼ˆåˆä½µå„²å­˜æ ¼ï¼‰
                    if (period === "ä¸­åˆ") {
                        const nameTd = document.createElement("td");
                        nameTd.innerText = name;
                        nameTd.rowSpan = 2;
                        tbody.appendChild(tr);
                        tr.appendChild(nameTd);
                    }

                    // æ™‚æ®µæ¬„
                    const timeTd = document.createElement("td");
                    timeTd.innerText = period;
                    tr.appendChild(timeTd);

                    // æ¯å¤©çš„ç­åˆ¥é¸å–®
                    for (let i = 0; i < 7; i++) {
                        const td = document.createElement("td");
                        const select = document.createElement("select");
                        select.className = "form-select form-select-sm time-select";
                        shifts.forEach(s => {
                            const opt = document.createElement("option");
                            opt.value = s;
                            opt.textContent = s || "â€”";
                            select.appendChild(opt);
                        });
                        td.appendChild(select);
                        tr.appendChild(td);
                    }

                    tbody.appendChild(tr);
                });
            });
        }

        // å„²å­˜åŠŸèƒ½ï¼ˆæš«ç¤ºè­¦ç¤ºï¼‰
        function saveSchedule() {
            alert("âœ… ç­è¡¨å·²å„²å­˜ï¼ˆæ¨¡æ“¬ï¼‰");
        }

        // æœªä¾†ä½ å¯ä»¥åœ¨é€™è£¡æ§åˆ¶æ¬„ä½è§£é–ã€è®Šè‰²æˆ–é–‹å•Ÿç·¨è¼¯åŠŸèƒ½
        function editSchedule() {
            alert("é€²å…¥ç·¨è¼¯æ¨¡å¼ï¼ï¼ˆç›®å‰ç‚ºç¯„ä¾‹åŠŸèƒ½ï¼‰");
        }

        // åˆå§‹åŒ–
        renderTableHeader();
        renderScheduleRows();
    </script>
</body>
</html>
<!-- âœ… ç½®ä¸­å€å¡ŠçµæŸ -->

<!-- ğŸ› ï¸ Javascript -->
<script>
const yearSelect = document.getElementById('yearSelect');
const monthSelect = document.getElementById('monthSelect');
const daySelect = document.getElementById('daySelect');

// åˆå§‹åŒ–æ—¥æœŸ
const today = new Date();
for (let y = 2020; y <= 2030; y++) {
    yearSelect.innerHTML += `<option value="${y}" ${y === today.getFullYear() ? 'selected' : ''}>${y}</option>`;
}
for (let m = 1; m <= 12; m++) {
    monthSelect.innerHTML += `<option value="${m}" ${m === today.getMonth() + 1 ? 'selected' : ''}>${m}</option>`;
}
for (let d = 1; d <= 31; d++) {
    daySelect.innerHTML += `<option value="${d}" ${d === today.getDate() ? 'selected' : ''}>${d}</option>`;
}

// æŸ¥è©¢ç­è¡¨
function loadSchedule() {
    const year = yearSelect.value;
    const month = monthSelect.value.padStart(2, '0');
    const day = daySelect.value.padStart(2, '0');
    const date = `${year}-${month}-${day}`;

    fetch('api_schedule.php?date=' + date)
        .then(res => res.json())
        .then(data => {
            const table = document.getElementById('currentScheduleTable');
            table.innerHTML = data.map(row => `
                <tr>
                    <th class="bg-light">${row.timeSlot}</th>
                    ${row.days.map(val => `<td>${val}</td>`).join('')}
                </tr>
            `).join('');
        });
}

function generateWeekHeader() {
  const weekHeader = document.getElementById('weekHeader');
  const today = new Date();
  const dayOfWeek = today.getDay(); // æ˜ŸæœŸå¹¾ï¼ˆ0 = Sundayï¼‰
  const monday = new Date(today); // è¨ˆç®—é€±ä¸€
  monday.setDate(today.getDate() - ((dayOfWeek + 6) % 7));

  const weekdayLabels = ['æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­', 'æ˜ŸæœŸæ—¥'];
  const dateCells = [];

  for (let i = 0; i < 7; i++) {
    const d = new Date(monday);
    d.setDate(monday.getDate() + i);
    const mm = String(d.getMonth() + 1).padStart(2, '0');
    const dd = String(d.getDate()).padStart(2, '0');
    dateCells.push(`<th>${weekdayLabels[i]}<br>${mm}/${dd}</th>`);
  }

  weekHeader.innerHTML = `<tr><th></th>${dateCells.join('')}</tr>`;
}

window.addEventListener('DOMContentLoaded', generateWeekHeader);


// å„²å­˜ç­è¡¨
function saveSchedule() {
    alert('ç­è¡¨å„²å­˜æˆåŠŸï¼ï¼ˆç¯„ä¾‹åŠŸèƒ½ï¼Œæœªé€£ APIï¼‰');
}
</script>

</body>
</html>


                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid px-4">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; Xxing0625</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
    </body>
</html>
